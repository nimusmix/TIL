# Django_02_0831

## ✨ URL namespace

- URL namespace를 사용하면 서로 다른 앱에서 동일한 URL 이름을 사용하는 경우에도
    이름이 지정된 URL을 고유하게 사용할 수 있음.
- `app_name` attribute를 작성해 URL namespace를 설정

```python
# articles/urls.py
app_name = 'articles'
urlpatterns = [
	...,
]

# pages/urls.py
app_name = 'pages'
urlpatterns = [
	...,
]

# URL 태그의 변화
{% url 'index' %}                          # 전
{% url 'articles:index' %}                 # 후
```

<br/>

## ✨ Template namespace

- 장고는 기본적으로 `app_name/templates/` 경로에 있는 템플릿 파일들만 찾을 수 있으며,
    settings.py의 INSTALLED_APPS에 작성한 app 순서로 template을 검색 후 렌더링 함.
- 디렉토리 생성을 통해 물리적인 이름공간 구분
    - 장고 템플릿의 기본 경로에 app과 같은 이름의 폴더를 생성해
        폴더구조를 `app_name/templates/app_name/` 형태로 변경

<br/>

## ✨ Database

- 체계화된 데이터의 모임

- 검색 및 구조화 같은 작업을 보다 쉽게 하기 위해 조직화된 데이터를 수집하는 저장 시스템

- Database 기본 구조

    1. **스키마 (Schema)**

        - Database의 뼈대 (Structure)

        - 데이터베이스에서의 자료의 구조, 표현 방법, 관계 등을 정의한 구조

        - ex)

            | column | datatype |
            | :----: | :------: |
            |   id   |   INT    |
            |  name  |   TEXT   |
            |  age   |   INT    |
            | email  |   TEXT   |

    2. **테이블 (Table)**

        - **필드**와 **레코드**를 사용해 조직된 데이터 요소들의 집합
        - 관계(Realation)라고도 부름.
        - **필드** : 속성, 열(Column)
                      각 필드에는 고유한 데이터 형식이 저장됨. (INT, TEXT 등)
        - **레코드** : 튜플, 행(Row)
                         테이블의 데이터는 레코드에 저장됨.

- **PK (Primary Key)**

    - 기본 키
    - 각 레코드의 고유한 값 (식별자로 사용)
    - 기술적으로 다른 항목과 절대로 중복될 수 없는 단일 값 (unique)
    - 데이터베이스 관리 및 테이블 간 관계 설정 시 주요하게 활용됨.

- **쿼리 (Query)**

    - 데이터를 조회하기 위한 명령어
    - 조건에 맞는 데이터를 추출하거나 조작하는 명령어 (주로 테이블형 자료구조에서)
    - "Query를 날린다." == "데이터베이스를 조작한다."

<br/>

## ✨ Django Model

- 장고는 모델을 통해 데이터에 접근하고 조작함.

- 사용하는 데이터들의 필수적인 필드들과 동작들을 포함

- 저장된 데이터베이스의 구조 (layout)

- 일반적으로 각각의 모델은 하나의 데이터베이스 테이블에 매핑(mapping)

    - mapping : 하나의 값을 다른 값으로 대응시키는 것
    - 모델 클래스 1개 == 데이터베이스 테이블 1개

- `models.py` 작성

    - 모델 클래스를 작성하는 것은 **데이터베이스 테이블의 스키마를 정의**하는 것

    - 모델 클래스 == 테이블 스키마

    - 각 모델은 django.db.models 모듈의 Model 클래스를 상속받아 구성됨.

        ➡️ 클래스 상속 기반 형태의 Django 프레임워크 개발

    - models 모듈을 통해 어떤 데이터 구조가 필요한지 정의

- Django Model Field

    - 장고는 모델 필드를 통해 테이블의 필드에 저장할 데이터 유형을 정의
    - 데이터 유형에 따라 다양한 모델 필드를 제공
        ex) `DataField()`, `CharField(max_length=&)`, `TextField()`, `IntergerField()` 등

```python
# articles/models.py
class Article(models.Model):                  # models.Model 상속 받음.
  title = models.CharField(max_length=10)     # 클래스 변수가 하나의 필드가 됨. 필드의 type을 지정함.
  content = models.TextField()                # id 컬럼은 테이블 생성시 장고가 자동으로 생성
```

<br/>

## ✨ Migrations

- 장고가 모델에 생긴 변화(필드 추가, 수정 등)을 실제 DB에 반영하는 방법
- **주요 명령어**
    1. `makemigrations`
    2. `migrate`

```python
python manage.py makemigrations               # 설계도 만들기
python manage.py migrate                      # 설계도를 실제 데이터베이스(db.sqlite3)에 반영
```

<br/>

## ✨



<br/>